{

    "env_default": {
        "env": {
            "now": "2020-02-02T12:34:56Z"
        }
    },

    "op_orgmgmt_create_invitation": {
        "orgmgmt": {
            "op": {
                "id": "CreateInvitation",
                "organization": {"id": "PARTY"}
            }
        }
    },

    "op_capi_create_payment_resource": {
        "capi": {
            "op": {
                "id": "CreatePaymentResource",
                "party": {"id": "PARTY"}
            }
        }
    },

    "op_capi_create_webhook": {
        "capi": {
            "op": {
                "id": "CreateWebhook",
                "party": {"id": "PARTY"}
            }
        }
    },

    "op_capi_create_invoice": {
        "capi": {
            "op": {
                "id": "CreateInvoice",
                "invoice": {"id": "INVOICE"},
                "shop": {"id": "SHOP"},
                "party": {"id": "PARTY"}
            }
        }
    },

    "op_capi_get_invoice": {
        "capi": {
            "op": {
                "id": "GetInvoiceByID",
                "invoice": { "id": "INVOICE" },
                "shop": { "id": "SHOP" },
                "party": { "id": "PARTY" }
            }
        }
    },

    "op_capi_create_refund": {
        "capi": {
            "op": {
                "id": "CreateRefund",
                "invoice": {"id": "INVOICE"},
                "payment": {"id": "PAYMENT"},
                "shop": {"id": "SHOP"},
                "party": {"id": "PARTY"}
            }
        }
    },


    "op_capi_get_invoice_2": {
        "capi": {
            "op": {
                "id": "GetInvoiceByID",
                "invoice": { "id": "INVOICE_2" },
                "shop": { "id": "SHOP" },
                "party": { "id": "PARTY" }
            }
        }
    },

    "op_capi_get_refunds": {
        "capi": {
            "op": {
                "id": "GetRefunds",
                "invoice": {
                    "id": "INVOICE"
                },
                "party": {
                    "id": "PARTY"
                }
            }
        },
        "payment_processing": {
            "invoice": {
                "id": "INVOICE",
                "party": {
                    "id": "PARTY"
                },
                "shop": {
                    "id": "SHOP"
                }
            }
        }
    },

    "op_capi_get_invoice_payment_methods": {
        "capi": {
            "op": {
                "id": "GetInvoicePaymentMethods",
                "invoice": { "id": "INVOICE" },
                "shop": { "id": "SHOP" },
                "party": { "id": "PARTY" }
            }
        }
    },

    "op_capi_get_invoice_events": {
        "capi": {
            "op": {
                "id": "GetInvoiceEvents",
                "invoice": { "id": "INVOICE" },
                "shop": { "id": "SHOP" },
                "party": { "id": "PARTY" }
            }
        }
    },

    "op_capi_create_payment": {
        "capi": {
            "op": {
                "id": "CreatePayment",
                "invoice": { "id": "INVOICE" },
                "shop": { "id": "SHOP" },
                "party": { "id": "PARTY" }
            }
        }
    },

    "op_capi_cancel_payment_fail": {
        "capi": {
            "op": {
                "id": "CancelPayment",
                "invoice": {
                    "id": "INVOICE"
                },
                "payment": {
                    "id": "PAYMENT"
                },
                "shop": {
                    "id": "SHOP"
                },
                "party": {
                    "id": "PARTY"
                }
            }
        },
        "payment_processing": {
            "invoice": {
                "id": "INVOICE",
                "party": {
                    "id": "PARTY"
                },
                "shop": {
                    "id": "SHOP_2"
                }
            }
        }
    },

    "op_capi_get_refund_by_id": {
        "capi": {
            "op": {
                "id": "GetRefundByID",
                "invoice": {
                    "id": "INVOICE"
                },
                "shop": {
                    "id": "SHOP"
                },
                "party": {
                    "id": "PARTY"
                },
                "payment": {
                    "id": "PAYMENT"
                },
                "refund": {
                    "id": "REFUND"
                }
            }
        },
        "payment_processing": {
            "invoice": {
                "id": "INVOICE",
                "party": {
                    "id": "PARTY"
                },
                "shop": {
                    "id": "SHOP"
                },
                "payments": [
                    {
                        "id": "PAYMENT",
                        "refunds": [
                            { "id": "REFUND" }
                        ]
                    }
                ]
            }
        }
    },

    "op_capi_no_shop_context": {
        "capi": {
            "op": {
                "id": "CapturePayment",
                "invoice": {
                    "id": "INVOICE"
                },
                "payment": {
                    "id": "PAYMENT"
                },
                "shop": {
                    "id": "SHOP"
                },
                "party": {
                    "id": "PARTY"
                }
            }
        },
        "payment_processing": {
            "invoice": {
                "id": "INVOICE",
                "party": {
                    "id": "PARTY"
                }
            }
        }
    },

    "op_capi_no_party_context": {
        "capi": {
            "op": {
                "id": "FulfillInvoice",
                "invoice": {
                    "id": "INVOICE"
                },
                "shop": {
                    "id": "SHOP"
                },
                "party": {
                    "id": "PARTY"
                }
            }
        },
        "payment_processing": {
            "invoice": {
                "id": "INVOICE",
                "shop": {
                    "id": "SHOP"
                }
            }
        }
    },

    "op_capi_create_invoice_access_token": {
        "capi": {
            "op": {
                "id": "CreateInvoiceAccessToken",
                "party": {
                    "id": "PARTY"
                },
                "invoice": {
                    "id": "INVOICE"
                }
            }
        },
        "payment_processing": {
            "invoice": {
                "id": "INVOICE",
                "party": {
                    "id": "PARTY"
                },
                "shop": {
                    "id": "SHOP"
                }
            }
        }
    },

    "op_capi_get_payment_institution_payout_schedules": {
        "capi": {
            "op": {
                "id": "GetPaymentInstitutionPayoutSchedules"
            }
        }
    },

    "op_capi_update_invoice_template": {
        "capi": {
            "op": {
                "id": "UpdateInvoiceTemplate",
                "party": {
                    "id": "PARTY"
                },
                "invoice_template": {
                    "id": "INVOICE_TEMPLATE"
                },
                "shop": {
                    "id": "SHOP"
                }
            }
        },
        "payment_processing": {
            "invoice_template": {
                "id": "INVOICE_TEMPLATE",
                "party": {
                    "id": "PARTY"
                },
                "shop": {
                    "id": "SHOP"
                }
            }
        }
    },

    "op_capi_create_binding": {
        "capi": {
            "op": {
                "id": "CreateBinding",
                "party": {
                    "id": "PARTY"
                },
                "customer": {
                    "id": "CUSTOMER"
                },
                "shop": {
                    "id": "SHOP"
                }
            }
        },
        "payment_processing": {
            "customer": {
                "id": "CUSTOMER",
                "party": {
                    "id": "PARTY"
                },
                "shop": {
                    "id": "SHOP"
                }
            }
        }
    },


    "op_capi_get_binding": {
        "capi": {
            "op": {
                "id": "GetBinding",
                "party": {
                    "id": "PARTY"
                },
                "customer": {
                    "id": "CUSTOMER"
                }
            }
        },
        "payment_processing": {
            "customer": {
                "id": "CUSTOMER",
                "party": {
                    "id": "PARTY"
                },
                "shop": {
                    "id": "SHOP"
                },
                "bindings": [
                    {"id" : "BINDING"}
                ]
            }
        }
    },

    "op_capi_insufficient_input_info": {
        "capi": {
            "op": {
                "id": "GetRefundByID",
                "invoice": {
                    "id": "INVOICE"
                }
            }
        },
        "payment_processing": {
            "invoice": {
                "id": "INVOICE",
                "party": {
                    "id": "PARTY"
                },
                "shop": {
                    "id": "SHOP"
                },
                "payments": [
                    {
                        "id": "PAYMENT",
                        "refunds": [
                            { "id": "REFUND" }
                        ]
                    }
                ]
            }
        }
    },

    "op_capi_get_payments": {
        "capi": {
            "op": {
                "id": "GetPayments",
                "invoice": { "id": "INVOICE" },
                "shop": { "id": "SHOP" },
                "party": { "id": "PARTY" }
            }
        }
    },

    "op_capi_get_payment_by_id": {
        "capi": {
            "op": {
                "id": "GetPaymentByID",
                "invoice": { "id": "INVOICE" },
                "shop": { "id": "SHOP" },
                "party": { "id": "PARTY" }
            }
        }
    },

    "op_capi_cancel_payment": {
        "capi": {
            "op": {
                "id": "CancelPayment",
                "invoice": { "id": "INVOICE" },
                "shop": { "id": "SHOP" },
                "party": { "id": "PARTY" }
            }
        }
    },

    "op_capi_capture_payment": {
        "capi": {
            "op": {
                "id": "CapturePayment",
                "invoice": { "id": "INVOICE" },
                "shop": { "id": "SHOP" },
                "party": { "id": "PARTY" }
            }
        }
    },

    "op_capi_get_invoice_template_by_id": {
        "capi": {
            "op": {
                "id": "GetInvoiceTemplateByID",
                "invoice_template": { "id": "INVOICE_TEMPLATE" },
                "shop": { "id": "SHOP" },
                "party": { "id": "PARTY" }
            }
        }
    },

    "op_capi_create_invoice_with_template": {
        "capi": {
            "op": {
                "id": "CreateInvoiceWithTemplate",
                "invoice_template": { "id": "INVOICE_TEMPLATE" },
                "shop": { "id": "SHOP" },
                "party": { "id": "PARTY" }
            }
        }
    },

    "op_capi_get_invoice_payment_methods_by_template_id": {
        "capi": {
            "op": {
                "id": "GetInvoicePaymentMethodsByTemplateID",
                "invoice_template": { "id": "INVOICE_TEMPLATE" },
                "shop": { "id": "SHOP" },
                "party": { "id": "PARTY" }
            }
        }
    },

    "op_capi_get_customer_by_id": {
        "capi": {
            "op": {
                "id": "GetCustomerById",
                "customer": { "id": "CUSTOMER" },
                "shop": { "id": "SHOP" },
                "party": { "id": "PARTY" }
            }
        }
    },

    "op_capi_empty": {
        "capi": {
            "op": {}
        }
    },

    "op_capi_get_customer_events": {
        "capi": {
            "op": {
                "id": "GetCustomerEvents",
                "customer": { "id": "CUSTOMER" },
                "shop": { "id": "SHOP" },
                "party": { "id": "PARTY" }
            }
        }
    },

    "op_capi_rescind_invoice": {
        "capi": {
            "op": {
                "id": "RescindInvoice",
                "invoice": {
                    "id": "INVOICE"
                },
                "shop": {
                    "id": "SHOP"
                },
                "party": {
                    "id": "PARTY"
                }
            }
        },
        "payment_processing": {
            "invoice": {
                "id": "INVOICE",
                "party": {
                    "id": "PARTY"
                },
                "shop": {
                    "id": "SHOP"
                }
            }
        }
    },

    "session_token_valid": {
        "auth": {
            "method": "SessionToken",
            "expiration": "2021-01-01T00:00:00Z",
            "token": {"id": "TÓKEN"}
        }
    },

    "session_token_missing_id": {
        "auth": {
            "method": "SessionToken",
            "expiration": "2021-01-01T00:00:00Z"
        }
    },

    "session_token_empty_id": {
        "auth": {
            "method": "SessionToken",
            "expiration": "2021-01-01T00:00:00Z",
            "token": {"id": ""}
        }
    },

    "invoice_access_token_valid": {
        "auth": {
            "method": "InvoiceAccessToken",
            "expiration": "2021-01-01T00:00:00Z",
            "token": { "id": "TÓKEN" },
            "scope": [
                {
                    "invoice": { "id": "INVOICE" },
                    "party": { "id": "PARTY" }
                }
            ]
        }
    },

    "invoice_access_token_valid_party_2": {
        "auth": {
            "method": "InvoiceAccessToken",
            "expiration": "2021-01-01T00:00:00Z",
            "token": { "id": "TÓKEN" },
            "scope": [
                {
                    "invoice": { "id": "INVOICE" },
                    "party": { "id": "PARTY_2" }
                }
            ]
        }
    },

    "invoice_access_token_expired": {
        "auth": {
            "method": "InvoiceAccessToken",
            "expiration": "2020-02-02T00:00:00Z",
            "token": { "id": "TÓKEN" },
            "scope": [
                {
                    "invoice": { "id": "INVOICE" }
                }
            ]
        }
    },

    "invoice_template_access_token_valid": {
        "auth": {
            "method": "InvoiceTemplateAccessToken",
            "expiration": "2021-01-01T00:00:00Z",
            "token": { "id": "TÓKEN" },
            "scope": [
                {
                    "invoice_template": { "id": "INVOICE_TEMPLATE" },
                    "party": { "id": "PARTY" }
                }
            ]
        }
    },

    "customer_access_token_valid": {
        "auth": {
            "method": "CustomerAccessToken",
            "expiration": "2021-01-01T00:00:00Z",
            "token": { "id": "TÓKEN" },
            "scope": [
                {
                    "customer": { "id": "CUSTOMER" },
                    "party": { "id": "PARTY" }
                }
            ]
        }
    },

    "op_shortener_shorten_url": {
        "shortener": {
            "op": {
                "id": "ShortenUrl"
            }
        }
    },

    "op_shortener_get_shorten_url": {
        "shortener": {
            "op": {
                "id": "GetShortenedUrl",
                "shortened_url": {
                    "owner": { "id": "USER" }
                }
            }
        }
    },

    "op_shortener_delete_shorten_url": {
        "shortener": {
            "op": {
                "id": "DeleteShortenedUrl",
                "shortened_url": {
                    "owner": { "id": "USER" }
                }
            }
        }
    },

    "op_binapi_lookup_card_info": {
        "binapi": {
            "op": {
                "id": "LookupCardInfo",
                "party": {
                    "id": "PARTY_2"
                }
            }
        }
    },

    "op_anapi": {
        "anapi": {
            "op": {
                "id": "SearchInvoices",
                "party": { "id": "PARTY"},
                "shops": [
                    { "id": "SHOP" }
                ]
            }
        }
    },

    "op_anapi_no_shops": {
        "anapi": {
            "op": {
                "id": "SearchInvoices",
                "party": { "id": "PARTY"},
                "shops": []
            }
        }
    },

    "op_anapi_several_shops": {
        "anapi": {
            "op": {
                "id": "SearchInvoices",
                "party": { "id": "PARTY"},
                "shops": [
                    { "id": "SHOP" },
                    { "id": "SHOP2" },
                    { "id": "SHOP3" }
                ]
            }
        }
    },

    "op_anapi_reports": {
        "anapi": {
            "op": {
                "id": "SearchReports",
                "party": { "id": "PARTY"},
                "shops": [
                    { "id": "SHOP" }
                ]
            }
        }
    },

    "op_anapi_restrictions": {
        "anapi": {
            "op": {
                "shops": [
                    {
                        "id": "SHOP"
                    }
                ]
            }
        }
    },

    "op_anapi_restrictions_several_shops": {
        "anapi": {
            "op": {
                "shops": [
                    {
                        "id": "SHOP"
                    },
                    {
                        "id": "SHOP2"
                    }
                ]
            }
        }
    },

    "user_default_other_role": {
        "user": {
            "id": "USER",
            "orgs": [
                {
                    "id": "PARTY",
                    "owner": { "id": "OWNER" },
                    "roles": [
                        {
                            "id": "OtherRole",
                            "scope": {
                                "shop": {
                                    "id": "SHOP"
                                }
                            }
                        }
                    ]
                }
            ]
        }
    },

    "user_default": {
        "user": {
            "id": "USER",
            "orgs": [
                {
                    "id": "PARTY",
                    "owner": { "id": "OWNER" },
                    "roles": [
                        {
                            "id": "Manager",
                            "scope": {
                                "shop": {
                                    "id": "SHOP"
                                }
                            }
                        }
                    ]
                }
            ]
        }
    },

    "user_administrator": {
        "user": {
            "id": "USER",
            "orgs": [
                {
                    "id": "PARTY",
                    "owner": { "id": "OWNER" },
                    "roles": [
                        {
                            "id": "Administrator",
                            "scope": {
                                "shop": {
                                    "id": "SHOP"
                                }
                            }
                        }
                    ]
                }
            ]
        }
    },

    "user_several_roles": {
        "user": {
            "id": "USER",
            "orgs": [
                {
                    "id": "PARTY",
                    "owner": { "id": "OWNER" },
                    "roles": [
                        {
                            "id": "Manager",
                            "scope": {
                                "shop": {
                                    "id": "SHOP"
                                }
                            }
                        },
                        {
                            "id": "Manager",
                            "scope": {
                                "shop": {
                                    "id": "SHOP2"
                                }
                            }
                        },
                        {
                            "id": "OtherRole",
                            "scope": {
                                "shop": {
                                    "id": "SHOP3"
                                }
                            }
                        }
                    ]
                }
            ]
        }
    },

    "user_with_role_without_scope": {
        "user": {
            "id": "USER",
            "orgs": [
                {
                    "id": "PARTY",
                    "owner": { "id": "OWNER" },
                    "roles": [
                        {
                            "id": "Manager"
                        }
                    ]
                }
            ]
        }
    },

    "user_no_roles": {
        "user": {
            "id": "USER",
            "orgs": [
                {
                    "id": "PARTY",
                    "owner": { "id": "OWNER" },
                    "roles": []
                }
            ]
        }
    },

    "user_owner": {
        "user": {
            "id": "OWNER",
            "orgs": [
                {
                    "id": "PARTY",
                    "owner": { "id": "OWNER" },
                    "roles": []
                }
            ]
        }
    },

    "requester_default": {
        "requester": {
            "ip": "95.217.228.176"
        }
    },

    "requester_local": {
        "requester": {
            "ip": "10.1.17.141"
        }
    },

    "requester_local_ipv6": {
        "requester": {
            "ip": "fd12:3456:789a:1::42"
        }
    }

}
